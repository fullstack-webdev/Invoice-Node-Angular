<form name="OrderForm" class="form-horizontal">
  <div class="app-body-content  app-body-with-toolbar">
    <div class="app-toolbar">
      <div class="btn-group">
        <h4>{{$lcmaPage.getTitle()}}</h4>
      </div>
    </div>

    <div class="app-data app-data-space order-facepage">

      <div class="panel panel-default">
        <div class="panel-heading clearfix">
          <h2>
            Order Header Info: <span>{{ctx.order.type}}</span>
            Vendor: <span>{{ctx.order.vendor.name}}</span>,
            Order ID: <span>{{ctx.order.sp_id}}</span>
          </h2>
        </div>
        <div class="panel-body">
          <div class="row mar-b">
            <div class="col-sm-12 text-center">
              <div class="btn-group panel-ctrls">
                <button ng-click="ctx.editOrder()"
                        class="btn btn-default" ng-class="{'active': ctx.editing}">
                  Edit
                </button>
                <button ng-click="ctx.saveOrder(OrderForm)"
                        class="btn btn-default">
                  Save
                </button>
              </div>

              <div class="btn-group panel-ctrls">
                <button class="btn btn-default">
                  Change
                </button>
                <button class="btn btn-default">
                  Disconnect
                </button>
              </div>

              <div class="btn-group panel-ctrls">
                <button ng-click="ctx.editContract()"
                        class="btn btn-primary">
                   Add Note
                </button>
                <button ng-click="ctx.editContract()"
                        class="btn btn-primary">
                  < Add Alias
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading clearfix">
            <h2>Circuit Info
            </h2>
          </div>
          <div class="panel-body">
            <div class="row mar-b">
              <div class="col-sm-1">
                Int Ckt ID
              </div>
              <div class="col-sm-2">
                <input ng-required="true" name="int_ckt_id" ng-model="ctx.order.int_ckt_id" type="text"
                       class="form-control text-right" ng-readonly="!ctx.editing">
              </div>
              <div class="col-sm-1">
                SP Ckt ID
              </div>
              <div class="col-sm-2">
                <input ng-required="true" name="int_ckt_id" ng-model="ctx.order.sp_id" type="text"
                       class="form-control text-right" ng-readonly="!ctx.editing">
              </div>
              <div class="col-sm-1">
                Vendor
              </div>
              <div class="col-sm-2">
                <select class="form-control" ng-options="vendor.id as vendor.name for vendor in ctx.vendors"
                  ng-model="ctx.order.vendor_id" ng-disabled="!ctx.editing"></select>
              </div>
              <div class="col-sm-1">
                BAN
              </div>
              <div class="col-sm-2">
                <input name="ban" ng-model="ctx.order.vendor.code" type="text"
                       class="form-control text-right" readonly>
              </div>

            </div>
            <div class="row mar-t">
              <div class="col-sm-1">
                Status
              </div>
              <div class="col-sm-2">
                <select class="form-control" name="status"
                        ng-options="status.key as status.value for status in ctx.statuses"
                        ng-model="ctx.order.status_id" ng-disabled="!ctx.editing">
                </select>

              </div>
              <div class="col-sm-1">
                Client
              </div>
              <div class="col-sm-2">
                <input ng-required="true" name="client" ng-model="ctx.order.client" type="text"
                       class="form-control text-right" ng-readonly="!ctx.editing">
              </div>
              <div class="col-sm-1">
                Topology
              </div>
              <div class="col-sm-2">
                <select class="form-control" name="topology"
                        ng-options="topology.key as topology.value for topology in ctx.topologies"
                        ng-model="ctx.order.topology_id" ng-disabled="!ctx.editing">
                </select>
              </div>
              <div class="col-sm-1">
                Ckt Type
              </div>
              <div class="col-sm-2">
                <select class="form-control" name="ckt_type"
                        ng-options="cktType.key as cktType.value for cktType in ctx.cktTypes"
                        ng-model="ctx.order.ckt_type_id" ng-disabled="!ctx.editing">
                </select>
              </div>
            </div>

            <div class="row mar-t">
              <div class="col-sm-1">
                Technology
              </div>
              <div class="col-sm-2">
                <select class="form-control" name="technology"
                        ng-options="technology.key as technology.value for technology in ctx.technologies"
                        ng-model="ctx.order.technology_id" ng-disabled="!ctx.editing">
                </select>
              </div>
              <div class="col-sm-1">
                CIR BW
              </div>
              <div class="col-sm-2">
                <input ng-required="true" name="cir_bw" ng-model="ctx.order.cir_bw" type="text"
                       class="form-control text-right" ng-readonly="!ctx.editing">
              </div>
              <div class="col-sm-1">
                BW Max
              </div>
              <div class="col-sm-2">
                <input ng-required="true" name="bw_max" ng-model="ctx.order.bw_max" type="text"
                       class="form-control text-right" ng-readonly="!ctx.editing">
              </div>
              <div class="col-sm-1">
                BW Model
              </div>
              <div class="col-sm-2">
                <select class="form-control" name="bw_model"
                        ng-options="bwModel.key as bwModel.value for bwModel in ctx.bwModels"
                        ng-model="ctx.order.bw_model_id" ng-disabled="!ctx.editing">
                </select>
              </div>
            </div>

            <div class="row mar-t">
              <div class="col-sm-1">
                Ckt Usage
              </div>
              <div class="col-sm-2">
                <select class="form-control" name="ckt_usage"
                        ng-options="cktUsage.key as cktUsage.value for cktUsage in ctx.cktUsages"
                        ng-model="ctx.order.ckt_usage_id" ng-disabled="!ctx.editing">
                </select>
              </div>
              <div class="col-sm-1">
                Contract ID
              </div>
              <div class="col-sm-2">
                <select class="form-control" ng-options="contract.id as contract.name for contract in ctx.contracts"
                        ng-model="ctx.order.contract_id" ng-disabled="!ctx.editing"></select>
              </div>
              <div class="col-sm-1">
                MRC
              </div>
              <div class="col-sm-2">
                <input ng-required="true" name="est_mrc" ng-model="ctx.order.est_mrc" type="text"
                       class="form-control text-right" ng-readonly="!ctx.editing">
              </div>
              <div class="col-sm-1">
                NRC
              </div>
              <div class="col-sm-2">
                <input ng-required="true" name="est_nrc" ng-model="ctx.order.est_nrc" type="text"
                       class="form-control text-right" ng-readonly="!ctx.editing">
              </div>
            </div>
            <div class="row mar-t">
              <div class="col-sm-1">
                Term
              </div>
              <div class="col-sm-2">
                <input ng-required="true" name="term" ng-model="ctx.order.term" type="text"
                       class="form-control text-right" ng-readonly="!ctx.editing">
              </div>
              <div class="col-sm-1">
                Protected?
              </div>
              <div class="col-sm-2">
                <select class="form-control" name="protected"
                        ng-options="protected.key as protected.value for protected in ctx.protects"
                        ng-model="ctx.order.protected_id" ng-disabled="!ctx.editing">
                </select>
              </div>
              <div class="col-sm-1">
                Install Date
              </div>
              <div class="col-sm-2">
                <input
                  uib-datepicker-popup="MM/dd/yyyy"
                  ng-model="ctx.order.install_date"
                  name="install_date"
                  placeholder="Install Date"
                  init-date="{{ctx.order.install_date}}"
                  class="form-control input-sm text-right"
                  is-open="ctx.install_date_ui.opened"
                  ng-click="ctx.install_date_ui.opened=true"
                  ng-disabled="!ctx.editing"
                >
              </div>
              <div class="col-sm-1">
                Exp Date
              </div>
              <div class="col-sm-2">
                <input
                  uib-datepicker-popup="MM/dd/yyyy"
                  ng-model="ctx.order.exp_date"
                  name="exp_date"
                  placeholder="Exp Date"
                  init-date="{{ctx.order.exp_date}}"
                  class="form-control input-sm text-right"
                  is-open="ctx.exp_date_ui.opened"
                  ng-click="ctx.exp_date_ui.opened=true"
                  ng-disabled="!ctx.editing"
                >
              </div>
            </div>
            <div class="row mar-t">
              <div class="col-sm-1">
                Disc Date
              </div>
              <div class="col-sm-2">
                <input
                  uib-datepicker-popup="MM/dd/yyyy"
                  ng-model="ctx.order.disc_date"
                  name="disc_date"
                  placeholder="Disc Date"
                  init-date="{{ctx.order.disc_date}}"
                  class="form-control input-sm text-right"
                  is-open="ctx.disc_date_ui.opened"
                  ng-click="ctx.disc_date_ui.opened=true"
                  ng-disabled="!ctx.editing"
                >
              </div>
              <div class="col-sm-1">
                Prim/Failover
              </div>
              <div class="col-sm-2">
                <select class="form-control" name="prim_failover"
                        ng-options="primFailover.key as primFailover.value for primFailover in ctx.primFailovers"
                        ng-model="ctx.order.prim_failover_id" ng-disabled="!ctx.editing">
                </select>
              </div>
              <div class="col-sm-3">
                Foil Rel Ckt {{ctx.order.foil_rel_ckt}}
              </div>
              <div class="col-sm-3">

              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading clearfix">
          <h2>Site Info</h2>
        </div>
        <div class="panel-body">
          <div class="row mar-b">
            <div class="col-sm-6">
              <div lcma-site-detail site-id="ctx.order.site_a_id" class="site-detail" editing="ctx.editing"/>
            </div>
            <div class="col-sm-6">
              <div lcma-site-detail site-id="ctx.order.site_z_id" class="site-detail" editing="ctx.editing"/>
            </div>
          </div>
        </div>
      </div>

      <div class="panel panel-default panel-related">
        <div class="panel-heading clearfix">
          <h2>Related Info</h2>
        </div>
        <div class="panel-body">

          <uib-tabset>
            <uib-tab heading="Orders"
                     active="ctx.relatedTabs.active === 'orders'"
                     ng-click="ctx.activateRelatedTab('orders')">

              <div class=" clearfix">
                <button class="btn btn-default pull-right" ng-click="ctx.addDocument()">
                  <i class="fa fa-plus"></i>
                  Add
                </button>
              </div>

              <div ng-if="!ctx.documents.length" class="empty-data">
                No documents added for this contract.
              </div>
              <div ng-if="ctx.documents.length" class="grid" ui-grid="ctx.documentsGrid"></div>
            </uib-tab>
            <uib-tab heading="Tickets"
                     active="ctx.relatedTabs.active === 'tickets' "
                     ng-click="ctx.activateRelatedTab('tickets')">
            </uib-tab>

            <uib-tab heading="Building"
                     active="ctx.relatedTabs.active === 'building'"
                     ng-click="ctx.activateRelatedTab('building')">
            </uib-tab>

            <uib-tab heading="Aliases"
                     active="ctx.relatedTabs.active === 'aliases'"
                     ng-click="ctx.activateRelatedTab('aliases')">
            </uib-tab>

            <uib-tab heading="Channels"
                     active="ctx.relatedTabs.active === 'channels'"
                     ng-click="ctx.activateRelatedTab('channels')">
            </uib-tab>

            <uib-tab heading="GL Codes"
                     active="ctx.relatedTabs.active === 'gl_codes'"
                     ng-click="ctx.activateRelatedTab('gl_codes')">

            </uib-tab>
            <uib-tab heading="Notes"
                     active="ctx.relatedTabs.active === 'notes'"
                     ng-click="ctx.activateRelatedTab('notes')">


            </uib-tab>
            <uib-tab heading="History"
                     active="ctx.relatedTabs.active === 'history'"
                     ng-click="ctx.activateRelatedTab('history')">

              <lcma-history entity_type="order@{{ctx.order.id}}"></lcma-history>
            </uib-tab>
          </uib-tabset>
        </div>
      </div>

      <br>
      <br>
      <br>
      <br>
      <br>

    </div>
  </div>
</form>
